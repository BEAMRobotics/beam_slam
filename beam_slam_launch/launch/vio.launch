<launch>

  <!-- Load calibration params for this dataset,  including intrinsics and extrinsics.
       Note: These are global params that need to be loaded for all launch files. -->
  <rosparam command="load" file="$(find beam_slam_launch)/config/calibration_params.yaml"/>

  <!-- LAUNCH WITH debug:=true TO TURN ON GDB DEBUGGER -->
  <arg name="debug" default='false'/>
  <arg unless="$(arg debug)" name="launch_prefix" value=" "/>
  <arg if="$(arg debug)" name="launch_prefix" value="gdb -ex run --args"/>
  
  <!-- Launch calibration publisher -->
  <arg name="extrinsics_file_path" default="$(find beam_slam_launch)/calibrations/ig2/extrinsics.json"/>
  <node name="calibration_publisher" pkg="calibration_publisher" type="calibration_publisher_main">
    <param name="robot_name" value=""/>
    <param name="extrinsics_file_path" value="$(arg extrinsics_file_path)"/>
  </node>

  <!-- Launch local (odometry) -->
  <node pkg="bs_optimizers" type="fixed_lag_smoother_node" name="local_mapper" output="screen"
    launch-prefix="$(arg launch_prefix)">
    <rosparam command="load" file="$(find beam_slam_launch)/config/vio.yaml"/>
  </node>

</launch>
